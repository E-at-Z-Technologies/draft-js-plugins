(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[349],{28349:function(e,t,n){"use strict";n.d(t,{ZP:function(){return fe},zk:function(){return le}});var o=n(46670),r=n(2784),i=n(6277),s=n(13980),a=n.n(s),c=n(1503),u=n(43173);var p=function(e,t){for(var n=-1,o=null==e?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r},l=n(34336),f=n(87263),d=n(31557);var g=function(e){return"symbol"==typeof e||(0,d.Z)(e)&&"[object Symbol]"==(0,f.Z)(e)},m=u.Z?u.Z.prototype:void 0,v=m?m.toString:void 0;var h=function e(t){if("string"==typeof t)return t;if((0,l.Z)(t))return p(t,e)+"";if(g(t))return v?v.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var y=function(e){return null==e?"":h(e)},E=/[\\^$.*+?()[\]{}|]/g,S=RegExp(E.source);var C=function(e){return(e=y(e))&&S.test(e)?e.replace(E,"\\$&"):e},O=n(99567),b=/\s/;var x=function(e){for(var t=e.length;t--&&b.test(e.charAt(t)););return t},k=/^\s+/;var A=function(e){return e?e.slice(0,x(e)+1).replace(k,""):e},w=n(17422),I=/^[-+]0x[0-9a-f]+$/i,M=/^0b[01]+$/i,T=/^0o[0-7]+$/i,D=parseInt;var K=function(e){if("number"==typeof e)return e;if(g(e))return NaN;if((0,w.Z)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,w.Z)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=A(e);var n=M.test(e);return n||T.test(e)?D(e.slice(2),n?2:8):I.test(e)?NaN:+e},P=1/0;var R=function(e){return e?(e=K(e))===P||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0};var F=function(e){var t=R(e),n=t%1;return t===t?n?t-n:t:0};var N=function(e,t){var n;if("function"!=typeof t)throw new TypeError("Expected a function");return e=F(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}};var B=function(e){return N(2,e)};function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Z(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _(e){var t=e.mention,n=e.children,o=e.className;return r.createElement("a",{href:t.link,className:o,spellCheck:!1,"data-testid":"mentionLink"},n)}function z(e){var t=e.children,n=e.className;return r.createElement("span",{className:n,spellCheck:!1,"data-testid":"mentionText"},t)}function q(e){var t=e.entityKey,n=e.theme,o=void 0===n?{}:n,s=e.mentionComponent,a=e.children,c=e.decoratedText,u=e.className,p=e.contentState,l=(0,i.Z)(o.mention,u),f=p.getEntity(t).getData().mention,d=s||(f.link?_:z);return r.createElement(d,{entityKey:t,mention:f,theme:o,className:l,decoratedText:c},a)}var H=function(e){var t=(0,r.useRef)(!1);(0,r.useEffect)((function(){t.current=!1}));var n=e.theme,o=void 0===n?{}:n,i=e.mention,s=e.searchValue,a=e.isFocused,c=e.id,u=a?o.mentionSuggestionsEntryFocused:o.mentionSuggestionsEntry,p=e.entryComponent;return r.createElement(p,{className:u,onMouseDown:function(e){e.preventDefault(),t.current=!0},onMouseUp:function(){t.current&&(e.onMentionSelect(e.mention),t.current=!1)},onMouseEnter:function(){e.onMentionFocus(e.index)},role:"option",id:c,"aria-selected":a?"true":void 0,theme:o,mention:i,isFocused:a,searchValue:s})};H.propTypes={entryComponent:a().any.isRequired,searchValue:a().string,onMentionSelect:a().func};var $=function(e,t,n){var o=t.getAnchorKey(),r=t.getAnchorOffset();return function(e,t,n){for(var o,r=e.substr(0,t),i=n.map((function(e){return C(e)})).join("|"),s=new RegExp("(\\s|^)("+i+")","g"),a=0,c=0,u=Z(r.matchAll(s));!(o=u()).done;){var p=o.value,l=p[1].length,f=p[2].length;c=(a=(p.index||0)+l)+f}var d=r.slice(c);return{begin:a,end:r.length,matchingString:d}}(e.getCurrentContent().getBlockForKey(o).getText(),r,n)};function W(e){return"@"===e?"mention":e+"mention"}function G(e){var t=e.mention,n=e.theme,o=void 0===n?{}:n;return t.avatar?r.createElement("img",{src:t.avatar,className:o.mentionSuggestionsEntryAvatar,role:"presentation"}):null}function X(e){var t=e.mention,n=e.theme;e.isFocused,e.searchValue;var o=V(e,["mention","theme","isFocused","searchValue"]);return r.createElement("div",o,r.createElement(G,{mention:t,theme:n}),r.createElement("span",{className:null==n?void 0:n.mentionSuggestionsEntryText},t.name))}var Y=function e(t){return t?"static"!==window.getComputedStyle(t).getPropertyValue("position")?t:e(t.parentElement):null};function J(e){var t,n=e.decoratorRect,o=e.popover,r=e.props,i=Y(o.parentElement);if(i){var s=i.getBoundingClientRect();t={scrollLeft:i.scrollLeft,scrollTop:i.scrollTop,left:n.left-s.left,top:n.bottom-s.top}}else t={scrollTop:window.pageYOffset||document.documentElement.scrollTop,scrollLeft:window.pageXOffset||document.documentElement.scrollLeft,top:n.bottom,left:n.left};var a,c,u=t.left+t.scrollLeft,p=t.top+t.scrollTop;return r.open&&(r.suggestions.length>0?(a="scale(1)",c="all 0.25s cubic-bezier(.3,1.2,.2,1)"):(a="scale(0)",c="all 0.35s cubic-bezier(.3,1,.2,1)")),{left:u+"px",top:p+"px",transform:a,transformOrigin:"1em 0%",transition:c}}function Q(e){return void 0!==e}function ee(e,t,n){var o=e.getSelection(),r=o.getAnchorKey(),i=o.getAnchorOffset();if(!o.isCollapsed()||!o.getHasFocus())return null;var s=t.map((function(e){return function(e){var t=e.split("-"),n=t[0],o=t[1],r=t[2];return{blockKey:n,decoratorKey:parseInt(o,10),leafKey:parseInt(r,10)}}(e)})).filter((function(e){return e.blockKey===r})).map((function(t){return e.getBlockTree(t.blockKey).getIn([t.decoratorKey])}));if(s.every((function(e){return void 0===e})))return null;var a=e.getCurrentContent().getBlockForKey(r).getText(),c=s.filter(Q).map((function(e){var t=e.start,o=e.end;return n.map((function(e){return 0===t&&i>=t+e.length&&a.substr(0,e.length)===e&&i<=o||n.length>1&&i>=t+e.length&&(a.substr(t+1,e.length)===e||a.substr(t,e.length)===e)&&i<=o||1===n.length&&i>=t+e.length&&i<=o?e:void 0})).filter(Q)[0]})).filter(Q);if(c.isEmpty())return null;var u=c.entrySeq().first();return{activeOffsetKey:u[0],activeTrigger:u[1]}}function te(e){var t=e.store,n=e.children,o=e.className,i=e.popperOptions,s=void 0===i?{placement:"bottom-start"}:i,a=(0,r.useState)(null),c=a[0],u=a[1],p=(0,O.D)(t.getReferenceElement(),c,s),l=p.styles,f=p.attributes;return r.createElement("div",j({ref:u,style:l.popper},f.popper,{className:o}),n)}var ne=B((function(e){0})),oe=function(e){var t,n;function o(t){var n;return(n=e.call(this,t)||this).state={focusedOptionIndex:0},n.key=(0,c.genKey)(),n.popover=void 0,n.activeOffsetKey=void 0,n.lastSearchValue=void 0,n.lastActiveTrigger="",n.lastSelectionIsInsideWord=void 0,n.onEditorStateChange=function(e){var t=n.props.store.getAllSearches();if(0===t.size)return e;var o=ee(e,t,n.props.mentionTriggers);if(!o)return n.props.store.resetEscapedSearch(),n.closeDropdown(),e;var r=n.activeOffsetKey;return n.activeOffsetKey=o.activeOffsetKey,n.onSearchChange(e,e.getSelection(),n.activeOffsetKey,r,o.activeTrigger),n.props.store.isEscaped(n.activeOffsetKey||"")||n.props.store.resetEscapedSearch(),n.props.open||n.props.store.isEscaped(n.activeOffsetKey||"")||n.openDropdown(),r!==n.activeOffsetKey&&n.setState({focusedOptionIndex:0}),e},n.onSearchChange=function(e,t,o,r,i){var s=$(e,t,[i]).matchingString;n.lastActiveTrigger===i&&n.lastSearchValue===s&&o===r||(n.lastActiveTrigger=i,n.lastSearchValue=s,n.props.onSearchChange({trigger:i,value:s}))},n.onDownArrow=function(e){e.preventDefault();var t=n.state.focusedOptionIndex+1;n.onMentionFocus(t>=n.props.suggestions.length?0:t)},n.onTab=function(e){e.preventDefault(),n.commitSelection()},n.onUpArrow=function(e){if(e.preventDefault(),n.props.suggestions.length>0){var t=n.state.focusedOptionIndex-1;n.onMentionFocus(t<0?n.props.suggestions.length-1:t)}},n.onEscape=function(e){e.preventDefault(),n.props.store.escapeSearch(n.activeOffsetKey||""),n.closeDropdown(),n.props.store.setEditorState(n.props.store.getEditorState())},n.onMentionSelect=function(e){if(e){n.props.onAddMention&&n.props.onAddMention(e),n.closeDropdown();var t=function(e,t,n,o,r){var i=e.getCurrentContent().createEntity(W(o),r,{mention:t}).getLastCreatedEntityKey(),s=e.getSelection(),a=$(e,s,[o]),u=a.begin,p=a.end,l=s.merge({anchorOffset:u,focusOffset:p}),f=c.Modifier.replaceText(e.getCurrentContent(),l,""+n+t.name,void 0,i),d=l.getAnchorKey();e.getCurrentContent().getBlockForKey(d).getLength()===p&&(f=c.Modifier.insertText(f,f.getSelectionAfter()," "));var g=c.EditorState.push(e,f,"insert-fragment");return c.EditorState.forceSelection(g,f.getSelectionAfter())}(n.props.store.getEditorState(),e,n.props.mentionPrefix,n.lastActiveTrigger||"",n.props.entityMutability);n.props.store.setEditorState(t)}},n.onMentionFocus=function(e){var t="mention-option-"+n.key+"-"+e;n.props.ariaProps.ariaActiveDescendantID=t,n.setState({focusedOptionIndex:e}),n.props.store.setEditorState(n.props.store.getEditorState())},n.commitSelection=function(){var e=n.props.suggestions[n.state.focusedOptionIndex];return n.props.store.getIsOpened()&&e?(n.onMentionSelect(e),"handled"):"not-handled"},n.openDropdown=function(){n.props.callbacks.handleReturn=n.commitSelection,n.props.callbacks.keyBindingFn=function(e){40===e.keyCode&&n.onDownArrow(e),38===e.keyCode&&n.onUpArrow(e),27===e.keyCode&&n.onEscape(e),9===e.keyCode&&n.onTab(e)};var e="mention-option-"+n.key+"-"+n.state.focusedOptionIndex;n.props.ariaProps.ariaActiveDescendantID=e,n.props.ariaProps.ariaOwneeID="mentions-list-"+n.key,n.props.ariaProps.ariaHasPopup="true",n.props.ariaProps.ariaExpanded=!0,n.props.onOpenChange(!0)},n.closeDropdown=function(){n.props.callbacks.handleReturn=void 0,n.props.callbacks.keyBindingFn=void 0,n.props.ariaProps.ariaHasPopup="false",n.props.ariaProps.ariaExpanded=!1,n.props.ariaProps.ariaActiveDescendantID=void 0,n.props.ariaProps.ariaOwneeID=void 0,n.props.onOpenChange(!1)},n.props.callbacks.onChange=n.onEditorStateChange,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,L(t,n);var i=o.prototype;return i.componentDidUpdate=function(){if(this.popover){var e=this.props.suggestions.length;if(e>0&&this.state.focusedOptionIndex>=e&&this.setState({focusedOptionIndex:e-1}),!this.props.store.getAllSearches().has(this.activeOffsetKey))return;for(var t=this.props.store.getPortalClientRect(this.activeOffsetKey),n=(this.props.positionSuggestions||J)({decoratorRect:t,props:this.props,popover:this.popover}),o=0,r=Object.entries(n);o<r.length;o++){var i=r[o],s=i[0],a=i[1];this.popover.style[s]=a}}},i.componentWillUnmount=function(){this.props.callbacks.onChange=void 0},i.render=function(){var e=this;if(!this.props.open)return null;var t=this.props,n=t.entryComponent,o=t.popoverComponent,i=t.popperOptions,s=t.popoverContainer,a=void 0===s?te:s;t.onOpenChange,t.onAddMention,t.onSearchChange,t.suggestions,t.ariaProps,t.callbacks;var c=t.theme,u=void 0===c?{}:c;t.store,t.entityMutability;var p=t.positionSuggestions;t.mentionTriggers,t.mentionPrefix;var l=V(t,["entryComponent","popoverComponent","popperOptions","popoverContainer","onOpenChange","onAddMention","onSearchChange","suggestions","ariaProps","callbacks","theme","store","entityMutability","positionSuggestions","mentionTriggers","mentionPrefix"]);return o||p?(ne("The properties `popoverComponent` and `positionSuggestions` are deprecated and will be removed in @draft-js-plugins/mentions 6.0 . Use `popperOptions` instead"),r.cloneElement(o||r.createElement("div",null),j({},l,{className:u.mentionSuggestions,role:"listbox",id:"mentions-list-"+this.key,ref:function(t){e.popover=t}}),this.props.suggestions.map((function(t,o){return r.createElement(H,{key:null!=t.id?t.id:t.name,onMentionSelect:e.onMentionSelect,onMentionFocus:e.onMentionFocus,isFocused:e.state.focusedOptionIndex===o,mention:t,index:o,id:"mention-option-"+e.key+"-"+o,theme:u,searchValue:e.lastSearchValue,entryComponent:n||X})})))):this.props.renderEmptyPopup||0!==this.props.suggestions.length?r.createElement(a,{store:this.props.store,className:u.mentionSuggestions,popperOptions:i},this.props.suggestions.map((function(t,o){return r.createElement(H,{key:null!=t.id?t.id:t.name,onMentionSelect:e.onMentionSelect,onMentionFocus:e.onMentionFocus,isFocused:e.state.focusedOptionIndex===o,mention:t,index:o,id:"mention-option-"+e.key+"-"+o,theme:u,searchValue:e.lastSearchValue,entryComponent:n||X})}))):null},o}(r.Component);oe.propTypes={open:a().bool.isRequired,onOpenChange:a().func.isRequired,entityMutability:a().oneOf(["SEGMENTED","IMMUTABLE","MUTABLE"]),entryComponent:a().func,onAddMention:a().func,suggestions:a().array.isRequired};var re="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;function ie(e){var t=(0,r.useRef)(),n=function(e){e.store.updatePortalClientRect(e.offsetKey,(function(){return t.current.getBoundingClientRect()}))};return re((function(){return e.store.register(e.offsetKey),e.store.setIsOpened(!0),n(e),e.store.setEditorState(e.store.getEditorState()),function(){e.store.unregister(e.offsetKey),e.store.setIsOpened(!1),e.store.setReferenceElement(null)}}),[]),(0,r.useEffect)((function(){n(e)})),r.createElement("span",{ref:function(n){t.current=n,e.store.setReferenceElement(n)}},e.children)}var se={mention:"m6zwb4v",mentionSuggestions:"mnw6qvm",mentionSuggestionsEntry:"m1ymsnxd",mentionSuggestionsEntryFocused:"m126ak5t",mentionSuggestionsEntryText:"mtiwdxc",mentionSuggestionsEntryAvatar:"myz2dw1"},ae=/\s/;function ce(e,t){return 0===t||ae.test(e[t-1])}var ue=function(e,t,n,o){var r=t.getText();t.findEntityRanges((function(e){return!e.getEntity()}),(function(t,i){var s=r.slice(t,i);n?function(e,t,n,o){for(var r,i,s=e.lastIndex;null!==(r=e.exec(t))&&e.lastIndex!==s;){s=e.lastIndex;var a=(i=n+r.index)+r[0].length;ce(t,r.index)&&o(i,a)}}(e,s,t,o):function(e,t,n,o){for(var r,i,s=e.lastIndex;null!==(r=e.exec(t))&&e.lastIndex!==s;){s=e.lastIndex;var a=(i=n+r.index)+r[0].length;ae.test(t[i])&&(i+=1),o(i,a)}}(e,s,t,o)}))},pe=function(e,t,n){var o="("+e.map((function(e){return C(e)})).join("|")+")",r=t?new RegExp(o+"("+n+"|\\s)*","g"):new RegExp("(\\s|^)"+o+n+"*","g");return function(e,n){ue(r,e,t,n)}},le=function(e,t,n){var o=e.toLowerCase(),r=(n&&!Array.isArray(t)?t[n]:t).filter((function(e){return!o||e.name.toLowerCase().indexOf(o)>-1})),i=r.length<5?r.length:5;return r.slice(0,i)},fe=function(e){void 0===e&&(e={});var t,n,i,s={keyBindingFn:void 0,handleKeyCommand:void 0,handleReturn:void 0,onChange:void 0},a={ariaHasPopup:"false",ariaExpanded:!1,ariaOwneeID:void 0,ariaActiveDescendantID:void 0},c=(0,o.Map)(),u=(0,o.Map)(),p=!1,l={getEditorState:void 0,setEditorState:void 0,getPortalClientRect:function(e){return u.get(e)()},getAllSearches:function(){return c},isEscaped:function(e){return t===e},escapeSearch:function(e){t=e},resetEscapedSearch:function(){t=void 0},register:function(e){c=c.set(e,e)},updatePortalClientRect:function(e,t){u=u.set(e,t)},unregister:function(e){c=c.delete(e),u=u.delete(e)},getIsOpened:function(){return p},setIsOpened:function(e){p=e},getReferenceElement:function(){return n},setReferenceElement:function(e){n=e}},f=e,d=f.mentionPrefix,g=void 0===d?"":d,m=f.theme,v=void 0===m?se:m,h=f.positionSuggestions,y=f.mentionComponent,E=f.mentionSuggestionsComponent,S=void 0===E?oe:E,C=f.entityMutability,O=void 0===C?"SEGMENTED":C,b=f.mentionTrigger,x=void 0===b?"@":b,k=f.mentionRegExp,A=void 0===k?"[\\w-\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u0148\u014a-\u017f\u0410-\u044f\u3040-\u309f\u30a0-\u30ff\u3130-\u318f\uac00-\ud7a3\u4e00-\u9fa5\u0600-\u06ff\xc0-\u1ef9]":k,w=f.supportWhitespace,I=void 0!==w&&w,M=f.popperOptions,T="string"===typeof x?[x]:x,D={ariaProps:a,callbacks:s,theme:v,store:l,entityMutability:O,positionSuggestions:h,mentionTriggers:T,mentionPrefix:g,popperOptions:M};return{MentionSuggestions:function(e){return r.createElement(S,j({},e,D))},decorators:[{strategy:(i=T,function(e,t,n){e.findEntityRanges((function(e){var t=e.getEntity();return null!==t&&i.some((function(e){return n.getEntity(t).getType()===W(e)}))}),t)}),component:function(e){return r.createElement(q,j({},e,{theme:v,mentionComponent:y}))}},{strategy:pe(T,I,A),component:function(e){return r.createElement(ie,j({},e,{store:l}))}}],getAccessibilityProps:function(){return{role:"combobox",ariaAutoComplete:"list",ariaHasPopup:a.ariaHasPopup,ariaExpanded:a.ariaExpanded,ariaActiveDescendantID:a.ariaActiveDescendantID,ariaOwneeID:a.ariaOwneeID}},initialize:function(e){var t=e.getEditorState,n=e.setEditorState;l.getEditorState=t,l.setEditorState=n},keyBindingFn:function(e){return s.keyBindingFn&&s.keyBindingFn(e)},handleReturn:function(e){return s.handleReturn&&s.handleReturn(e)},onChange:function(e){return s.onChange?s.onChange(e):e}}}}}]);